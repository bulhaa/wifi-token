<html>
    <body>
        
        <script>

            let start = Date.now();
            







            var a = [1,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000];
            var b = [5,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,10,12,4,10,6,66,100,500,3000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000];
            // var a = [1,2,3,4,5,6,3,1,2,3,11,22,33,8,9,10,20,30,40,200,300,1000,2000];
            // var b = [5,10,12,4,10,6,66,100,500,3000];









            var result = [];
            var currentCombo = []
            var priorityLengths = [1]
            var aBkp = [...a];
            
            a = a.sort(function(a, b){return a - b}); // sort ascending
            b = b.sort(function(a, b){return a - b}); // sort ascending
            
            
            for (let bi = 0; bi < b.length; bi++) { // try to find matches for numbers in b
                
                // try length 1, 2 etc...
                var maxLength = a.length - b.length + 2 + bi
                maxLength = 20
                for (let length = 1; length < maxLength; length++) {
                    // if(length < priorityLengths.length)
                    // 	tryLength(priorityLengths[length], b[bi])
                    // else
                    tryLength(length, b[bi])
            
                    // break if a match
                    if(b[bi] == getCurrentSum()) 
                        break
                }
            
                if(b[bi] == getCurrentSum()) { // if a match
                    result[bi] = getCombination() // note it down
            
                    removeComboFromA()
                }
            
            }

            let timeTaken = Date.now() - start;
            console.log("Total time taken : " + timeTaken + " milliseconds");
            
            console.log(result)
            
            function removeComboFromA(){
                currentCombo = currentCombo.sort(function(a, b){return b - a}); // sort descending
            
                for (let i = 0; i < currentCombo.length; i++) {
                    a.splice(currentCombo[i], 1);
                    // delete a[currentCombo[i]];
                }
                // a = a.sort(function(a, b){return a - b}); // sort ascending
            }
            
            // function removeLargerValuesFromA(){
            //     aBkp = [...a];
            //     currentCombo = currentCombo.sort(function(a, b){return b - a}); // sort descending
            
            //     for (let i = 0; i < currentCombo.length; i++) {
            //         // a.splice(currentCombo[i], 1);
            //         delete a[currentCombo[i]];
            //     }
            //     a = a.sort(function(a, b){return a - b}); // sort ascending
            // }
            
            function tryLength(length, needle){
                currentCombo = initialCombo(length)  // values in this array are pointers into array a
            
                do {
            
                    // return if match is found
                    if(needle == getCurrentSum())
                        return
            
                    // try next combination
                    currentCombo = nextCombo(currentCombo, currentCombo.length - 1, needle, 1);
                } while (currentCombo != false);
            }
            
            
            function nextCombo(currentCombo, incrementPos, needle, level){

                // if(level > 6750)
                //     level = level

                do {
                    if(currentCombo[incrementPos] < a.length - 1){
                        if(incrementPos == currentCombo.length - 1){ // if last element of combo
                            // value we need to find
                            let targetValue = needle - (getCurrentSum() - a[currentCombo[incrementPos]])
                
                            do {
                                currentCombo[incrementPos]++
                
                                if(a[currentCombo[incrementPos]] == targetValue)
                                    break; // found a possible value
                            } while (currentCombo[incrementPos] < a.length);
                        }else
                            currentCombo[incrementPos]++
                
                        if(needToSkipCombination(currentCombo, incrementPos, needle))
                            continue; // skip
                            // return nextCombo(currentCombo, incrementPos, needle, level + 1)
                
                        return currentCombo
                    } else {
                        if(incrementPos == 0)
                            return false
                
                        r = nextCombo(currentCombo, incrementPos - 1, needle, level + 1)
                
                        if(r == false)
                            return false
                
                        currentCombo[incrementPos] = 0
                
                        if(needToSkipCombination(currentCombo, incrementPos, needle))
                            continue; // skip
                            // return nextCombo(currentCombo, incrementPos, needle, level + 1)
                
                        return currentCombo
                    }
                } while (true);
            
            }
            
            function needToSkipCombination(currentCombo, incrementPos, needle){
                let sum = a[currentCombo[incrementPos]]
                for (let i = 0; i < incrementPos; i++) {
                    sum += a[currentCombo[i]]
            
                    // skip if sum is already greater than needle
                    if(sum > needle)
                        return true;
            
                    // skip if number is already used
                    if(currentCombo[incrementPos] == currentCombo[i])
                        return true;
                }
                
                return false;
            }
            
            
            function initialCombo(length){
                let arr = []
                for (let i = 0; i < length; i++) {
                    arr[i] = i
                }
                
                return arr;
            }
            
            function getCurrentSum(){
                if(typeof currentCombo == 'undefined' || !currentCombo)
                    return 0;
            
                var sum = 0
                for (let i = 0; i < currentCombo.length; i++) {
                    sum += a[currentCombo[i]]
                }
                
                return sum;
            }
            
            function getCombination(){
                var arr = []
                for (let i = 0; i < currentCombo.length; i++) {
                    arr.push(a[currentCombo[i]])
                }
                
                return arr;
            }
            
            </script>
            

    </body>
</html>